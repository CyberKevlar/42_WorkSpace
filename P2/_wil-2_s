# auto eth0
# iface eth0 inet static
#     address 192.168.1.22
#     netmask 255.255.255.0
# 
# auto eth1
# iface eth1 inet manual
# 
# auto vxlan10
# iface vxlan10 inet manual
#     pre-up ip link add vxlan10 type vxlan id 10 dev eth0 local 192.168.1.22 remote 192.168.1.21 dstport 4789 || true
#     up ip link set vxlan10 up
#     post-down ip link del vxlan10 || true
# 
# auto br0
# iface br0 inet static
#     address 10.0.0.2
#     netmask 255.255.255.0
#     pre-up ip link add br0 type bridge || true
#     pre-up ip link set eth1 master br0
#     pre-up ip link set vxlan10 master br0
#     up ip link set br0 up
#     post-down ip link del br0 || true

# ESTOS COMANDOS HAY QUE APLICARLOS EN LA CONSOLA DEL SWITCH_1 PARA MODO ESTATICO

# eth0: Creamos una ip para a la interfaz eth0 (la que esta del lado del host) del router.
ip addr add 10.1.1.2/24 dev eth1
ip link set dev eth1 up

# Bridge: a√±adimos br0 de tipo bridge.
ip link add br0 type bridge
ip link set dev br0 up

# VXLAN: creamos la vxlan vxlan10 de tipo vxlan, el id el 10, a traves de la interfaz de red eth0, y por donde se conectara una ip remota a otra local por el puerto 4789.
ip link add name vxlan10 type vxlan id 10 dev eth1 remote 10.1.1.1 local 10.1.1.2 dstport 4789
#ip addr add 20.1.1.2/24 dev vxlan10
ip link set dev vxlan10 up

# eth1: levantamos la interfaz (???)
ip link set dev eth0 up

# Unimos la interfaz local eth1 y la vxlan10 al puerte br0.
#brctl addif br0 eth1
#brctl addif br0 vxlan10
ip link set dev eth0 master br0
ip link set dev vxlan10 master br0
